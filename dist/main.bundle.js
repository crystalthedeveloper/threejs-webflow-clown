(()=>{var e,o,n,t,a,i,r,s=!1,c={},l=(new THREE.Vector3(0,1,5),null);function d(e){i&&c[e]?l!==e&&(i.stopAllAction(),l=e,c[e].reset().play(),s="walk"===e,console.log("Playing animation: ".concat(e))):console.log("Animation '".concat(e,"' is not initialized or found."))}function w(){requestAnimationFrame(w);var c=r.getDelta();i&&i.update(c),s&&a&&cameraFollow(a),t.update(),n.render(e,o)}function g(){var e=document.getElementById("threejs-container");if(console.log("Window resized. Resizing renderer."),e){var t=e.clientWidth,a=e.clientHeight;n.setSize(t,a),o.aspect=t/a,o.updateProjectionMatrix()}else console.error("Container element not found during resize.")}!function(){console.log("Initializing Three.js scene...");var s=document.getElementById("threejs-container");if(console.log("Container element:",s),s){n=new THREE.WebGLRenderer({antialias:!1}),console.log("Renderer created."),n.setPixelRatio(Math.min(window.devicePixelRatio,2)),n.setSize(window.innerWidth,window.innerHeight),n.shadowMap.enabled=!0,n.shadowMap.type=THREE.PCFSoftShadowMap,s.appendChild(n.domElement),(o=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3)).position.set(0,-1,5),console.log("Camera setup complete."),(e=new THREE.Scene).background=new THREE.Color(0),console.log("Scene created.");var l=new THREE.Mesh(new THREE.BoxGeometry(2e3,.1,2e3),new THREE.MeshStandardMaterial({color:2039842,roughness:.8,metalness:.8}));l.receiveShadow=!0,e.add(l),console.log("Floor added to scene."),r=new THREE.Clock,console.log("Clock initialized.");var h=new THREE.GLTFLoader,E=new THREE.DRACOLoader;E.setDecoderPath("https://www.gstatic.com/draco/v1/decoders/"),h.setDRACOLoader(E),console.log("GLTFLoader and DRACOLoader set up."),h.load("https://threejs-webflow-clown.vercel.app/public/clownV.glb",(function(o){(a=o.scene).position.set(0,.02,0),a.scale.set(1.5,1.5,1.5),console.log("Clown model loaded."),a.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.material&&e.material.isMeshStandardMaterial&&(e.material.roughness=.6,e.material.metalness=.2))})),i=new THREE.AnimationMixer(a),o.animations.forEach((function(e){var o=e.name.toLowerCase();c[o]=i.clipAction(e),console.log("Loaded animation: ".concat(o))})),d("idle"),e.add(a),t.target.set(0,1.5,0),t.update()})),(t=new THREE.OrbitControls(o,n.domElement)).enableDamping=!0,t.dampingFactor=.25,t.minDistance=4,t.maxDistance=20,t.maxPolarAngle=Math.PI/2,console.log("OrbitControls set up.");var m=new THREE.DirectionalLight(16777215,4);m.position.set(5,10,10),m.castShadow=!0,m.shadow.mapSize.set(1024,1024),e.add(m),e.add(new THREE.HemisphereLight(16777215,4473924,.8));var u=new THREE.RectAreaLight(16777215,2.5,5,5);u.position.set(0,5,10),u.rotation.y=Math.PI,e.add(u),e.add(new THREE.AmbientLight(16777215,.3)),console.log("Lights added to scene."),w(),window.addEventListener("resize",g)}else console.error('Error: Container with ID "threejs-container" not found!')}(),document.addEventListener("DOMContentLoaded",(function(){console.log("DOM fully loaded and parsed");var e=document.querySelectorAll("div[id]");0===e.length?console.log("No sections with IDs found."):console.log("Found ".concat(e.length," sections with IDs."));var o=new IntersectionObserver((function(e){e.forEach((function(e){if(console.log("Observing section with ID: ".concat(e.target.id,", isIntersecting: ").concat(e.isIntersecting)),e.isIntersecting){var o=e.target.id;switch(console.log("Section ".concat(o," is visible")),o){case"hero":d("idle");break;case"hello":d("hello");break;case"giveaway":d("break");break;case"capabilities":d("pose");break;case"store":d("walk");break;case"thanks":d("thanks");break;case"contactForm":d("phone");break;default:console.log("No animation found for section: ".concat(o))}}}))}));e.forEach((function(e){o.observe(e)}))}))})();